#!/usr/bin/env ruby

require 'shoryuken'

stale_regions = Shoryuken::Client.queues('ec2-stale-regions')
stale_tags = Shoryuken::Client.queues('ec2-stale-tags')
stale_vpcs = Shoryuken::Client.queues('ec2-stale-vpcs')

DELAY = ENV.fetch('DELAY') { 90 }.freeze

REGIONS = ENV
          .fetch('REGIONS') { 'us-west-1 us-west-2 us-east-1 eu-west-1 eu-central-1' }
          .split($IFS)
          .freeze

REGIONS.each do |region|
  stale_regions.send_message region
  stale_tags.send_message region
  stale_vpcs.send_message region
end
